WIP

TODO:
documentation
clean the code
more tests?


Also, change back from sync.mutex to sync.rwmutex, was testing something and its still there..